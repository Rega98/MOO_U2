<div class="card" *ngIf="registroConsulta == 'conPaciente'">
    <p-fieldset legend="Â¿Desea resgistrar un nuevo pasiente antes de registrar la consulta?">
        <div class="p-formgrid grid">
            <div class="p-field p-col">
                <button pButton pRipple type="button" label="No registrar" (click)="muestraFormularioNormal()" class="p-button-danger"></button>
                
            </div>
            <div class="p-field p-col">
                <button pButton pRipple type="button" label="Si Registrar Paciente" (click)="muestraFormularioPaciente()" class="p-button-success ml-4"></button>
            </div>
        </div>
    </p-fieldset>
</div>

<div class="card" >
    <div class="p-fluid p-formgrid grid">
        <div class="field col-12 md:col-6">
            <label>Fecha</label>
            <p-calendar [(ngModel)]="fechaRegistro" [showIcon]="true"></p-calendar>
        </div>
        <div class="field col-12 md:col-6">
            <label>Nombre Paciente</label>
            <p-dropdown [options]="listaPacientes" optionLabel="nombre" optionValue="id" [(ngModel)]="consulta.paciente"></p-dropdown>
        </div>
        <div class="field col-12 md:col-6">
            <label>Peso</label>
            <p-inputNumber [(ngModel)]="consulta.peso"></p-inputNumber>
        </div>
        <div class="field col-12 md:col-6">
            <label>Temperatura</label>
            <p-inputNumber [(ngModel)]="consulta.temperatura"></p-inputNumber>
        </div>
        <div class="field col-12 md:col-6">
            <label>Frecuencia Cardiaca</label>
            <p-inputNumber [(ngModel)]="consulta.frecuenciaCardiaca"></p-inputNumber>
        </div>
        <div class="field col-12 md:col-6">
            <label>Estatura</label>
            <p-inputNumber [(ngModel)]="consulta.estatura"></p-inputNumber>
        </div>
        <div class="field col-12 md:col-12">
            <label>Sintomas</label>
            <textarea  [(ngModel)]="consulta.sintomas" rows="1" cols="30" pInputTextarea></textarea>
        </div>
        <div class="field col-12 md:col-12">
            <label>Descripcion de analisis medico</label>
            <textarea [(ngModel)]="consulta.descripcionAnalisisMedico" rows="1" cols="30" pInputTextarea></textarea>
        </div>
        <div class="field col-12 md:col-12">
            <label>Diagnostico</label>
            <textarea [(ngModel)]="consulta.diagnostico" rows="1" cols="30" pInputTextarea></textarea>
        </div>
        <div class="field col-12 md:col-12">
            <label>Tratamiento</label>
            <textarea [(ngModel)]="consulta.tratamiento" rows="1" cols="30" pInputTextarea></textarea>
        </div>

        <div class="field col-12 md:col-6">
            <button pButton pRipple type="button" label="Cancelar" class="p-button-danger mt-4" (click)="cancelar()"></button>
        </div>
        <div class="field col-12 md:col-6">
            <!--<button pButton pRipple type="button" label="Agregar" class="p-button-success mt-4"></button>-->
            <button pButton pRipple type="button" label="Agregar" class="p-button-success mt-4" (click)="guardarConsulta()" ></button>
        </div>
    </div>

</div>


<p-dialog [(visible)]="nuevoPaciente" [style]="{width: '80vw'}">
    <ng-template pTemplate="header">
        <h4>Registro de paciente</h4>
    </ng-template>
    <div class="p-fluid p-formgrid grid">
        <div class="field col-12 md:col-6">
            <label>Nombre del paciente</label>
            <input type="text" [(ngModel)]="paciente.nombre"  pInputText>  
        </div>
        <div class="field col-12 md:col-6">
            <label>Apellido paterno</label>
            <input type="text" [(ngModel)]="paciente.apellidoP" pInputText>  
        </div>
        <div class="field col-12 md:col-6">
            <label>Apellido materno</label>
            <input type="text" [(ngModel)]="paciente.apellidoM" pInputText>
        </div>
        <div class="field col-12 md:col-6">
            <label>Sexo</label>
            <div *ngFor="let category of categories" class="p-field-checkbox">
                <p-radioButton [inputId]="category.key" name="category" [value]="category.name" [(ngModel)]="paciente.sexo"></p-radioButton>
                <label [for]="category.key">{{category.name}}</label>
            </div>
        </div>
        <div class="field col-12 md:col-6">
            <label for="timeonly">Fecha de nacimiento</label>
            <p-calendar [(ngModel)]="fechaNacimiento"  [showIcon]="true" inputId="icon" appendTo="body"></p-calendar>
        </div>
        <div class="field col-12 md:col-6">
            <label>Tipo de sangre</label>
            <input [(ngModel)]="paciente.tipoSangre" type="text" pInputText>
        </div>
        <div class="field col-12 md:col-12">
            <label>Alergias</label>
            <textarea [(ngModel)]="paciente.alergias" rows="1" cols="30" pInputTextarea></textarea>
        </div>
        <div class="field col-12 md:col-6">
            <label >Telefono de contacto</label>
            <input [(ngModel)]="paciente.telContacto" type="text" pInputText>
        </div>
        <div class="field col-12 md:col-6">
            <label >Email</label>
            <input [(ngModel)]="paciente.email" type="text" pInputText> 
        </div>
    </div>
    <ng-template pTemplate="footer">
        <button pButton pRipple type="button" label="Cancelar" class="p-button-danger mt-4"></button>
        <button pButton pRipple type="button" label="Agregar" (click)="registrarPaciente()" class="p-button-success mt-4"></button>
    </ng-template>
</p-dialog>
